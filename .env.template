# ===================================================================
# SISCOM CONSUMER - Environment Configuration Template
# ===================================================================
# Copy this file to .env and configure your values
# ===================================================================

# ===================================================================
# BROKER CONFIGURATION
# ===================================================================
# Broker type: "mqtt" or "kafka"
# - mqtt: Connect to MQTT broker (Mosquitto, etc.)
# - kafka: Connect to Kafka/Redpanda with Protobuf messages
BROKER_TYPE=mqtt

# Broker connection string
# For MQTT: tcp://host:port (e.g., tcp://localhost:1883)
# For Kafka: host:port (e.g., localhost:9092 or redpanda:9092)
BROKER_HOST=tcp://localhost:1883

# Topic to consume messages from
BROKER_TOPIC=siscom-messages

# ===================================================================
# MQTT SPECIFIC CONFIGURATION (only used when BROKER_TYPE=mqtt)
# ===================================================================
# MQTT Credentials (optional)
MQTT_USERNAME=
MQTT_PASSWORD=

# MQTT Client Configuration
MQTT_CLIENT_ID=siscom-consumer-rust
MQTT_KEEP_ALIVE_SECS=60
MQTT_CLEAN_SESSION=true
MQTT_MAX_RECONNECT_ATTEMPTS=10

# ===================================================================
# KAFKA SPECIFIC CONFIGURATION (only used when BROKER_TYPE=kafka)
# ===================================================================
# Kafka Producer Configuration

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
# PostgreSQL connection
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=tracking
DB_USERNAME=user
DB_PASSWORD=password

# Connection pool settings
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT_SECS=30
DB_IDLE_TIMEOUT_SECS=600

# ===================================================================
# PROCESSING CONFIGURATION
# ===================================================================
# Processing settings
PROCESSING_WORKER_THREADS=4
PROCESSING_MESSAGE_BUFFER_SIZE=10000
PROCESSING_BATCH_PROCESSING_SIZE=100
PROCESSING_MAX_PARALLEL_DEVICES=50

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
# Log level and output
RUST_LOG=info
LOGGING_FILE_PATH=
LOGGING_MAX_FILE_SIZE_MB=100
LOGGING_MAX_FILES=10
LOGGING_JSON_FORMAT=true

# ===================================================================
# EXAMPLES FOR DIFFERENT ENVIRONMENTS
# ===================================================================

# -------------------------------------------------------------------
# DEVELOPMENT WITH MQTT
# -------------------------------------------------------------------
# BROKER_TYPE=mqtt
# BROKER_HOST=tcp://localhost:1883
# BROKER_TOPIC=siscom-messages

# -------------------------------------------------------------------
# PRODUCTION WITH KAFKA/REDPANDA
# -------------------------------------------------------------------
# BROKER_TYPE=kafka
# BROKER_HOST=redpanda:9092
# BROKER_TOPIC=siscom-messages

# -------------------------------------------------------------------
# DEVELOPMENT WITH KAFKA
# -------------------------------------------------------------------
# BROKER_TYPE=kafka
# BROKER_HOST=localhost:9092
# BROKER_TOPIC=siscom-messages
